<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì—°ìŠµìƒ í•«í´ë¦½ ì±„ì ì§€</title>
    <style>
        body { font-family: 'Pretendard', -apple-system, sans-serif; padding: 20px; background-color: #f0f2f5; color: #1c1e21; }
        .container { max-width: 1300px; margin: 0 auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 8px 30px rgba(0,0,0,0.1); }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        h2 { color: #1a73e8; margin: 0; font-size: 24px; }
        
        .table-wrapper { overflow-x: auto; border-radius: 10px; border: 1px solid #dee2e6; }
        table { border-collapse: collapse; width: 100%; min-width: 900px; }
        th, td { border: 1px solid #ececec; padding: 15px; text-align: center; }
        th { background-color: #f8f9fa; color: #495057; font-weight: 700; position: sticky; top: 0; }
        
        .name-col { background-color: #ffffff; font-weight: bold; position: sticky; left: 0; z-index: 10; border-right: 2px solid #dee2e6; min-width: 100px; }
        
        .pass { color: #2ecc71; font-weight: bold; }
        .fail { color: #e74c3c; font-weight: bold; }
        .none { color: #adb5bd; }

        .btn-group { display: flex; gap: 10px; }
        .btn-add { background: linear-gradient(135deg, #6e8efb, #a777e3); color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: bold; transition: transform 0.2s; }
        .btn-add:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(110, 142, 251, 0.4); }
        .btn-reset { background: #ff4757; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: bold; }
        
        input[type="text"] { width: 90%; border: 1px solid #eee; text-align: center; padding: 8px; border-radius: 4px; font-size: 14px; }
        input[type="text"]:focus { outline: 2px solid #6e8efb; border-color: transparent; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h2>ğŸ¬ ì—°ìŠµìƒ í•«í´ë¦½ ì±„ì ì§€</h2>
        <div class="btn-group">
            <button class="btn-reset" onclick="resetData()">ì´ˆê¸°í™”</button>
            <button class="btn-add" onclick="addNextWeek()">+ ë‹¤ìŒ ì£¼ì°¨ ì¶”ê°€</button>
        </div>
    </div>

    <div class="table-wrapper">
        <table id="scoreTable">
            <thead>
                <tr id="headerRow">
                    <th class="name-col">ì´ë¦„</th>
                </tr>
            </thead>
            <tbody id="tableBody"></tbody>
        </table>
    </div>
</div>

<script>
    // ê¸°ë³¸ ì´ˆê¸° ë°ì´í„°
    const initialParticipants = [
        { name: "ë°¤ë² ", scores: ["1 PASS", "ë¯¸ì œì¶œ"] },
        { name: "ìœµë¡œë¡œ", scores: ["ë¯¸ì œì¶œ", "2 PASS"] },
        { name: "ì°Œë¡œ", scores: ["1 PASS / 1 FAIL", "ë¯¸ì œì¶œ"] },
        { name: "í”„í•˜", scores: ["1 FAIL", "ë¯¸ì œì¶œ"] },
        { name: "í˜¸ë°œ", scores: ["2 PASS", "1 PASS"] },
        { name: "ê³µë„ë¦¬", scores: ["ë¯¸ì œì¶œ", "ë¯¸ì œì¶œ"] },
        { name: "í•œì„¸í˜„", scores: ["2 FAIL", "1 PASS / 1 FAIL"] },
        { name: "ê¹€ì†œëƒ", scores: ["1 FAIL", "1 FAIL"] },
        { name: "ë„í˜", scores: ["2 PASS", "2 PASS"] },
        { name: "ë£¬ë‚˜", scores: ["1 PASS", "ë¯¸ì œì¶œ"] },
        { name: "ë¦¬í¼ì„", scores: ["1 PASS / 1 FAIL", "1 PASS / 1 FAIL"] },
        { name: "ë§ˆë¦¬íˆ", scores: ["2 FAIL", "2 FAIL"] },
        { name: "ë°¤ë¬¸", scores: ["2 PASS", "ë¯¸ì œì¶œ"] },
        { name: "ë°±ì†Œë¼", scores: ["2 PASS", "2 PASS"] },
        { name: "ìš”ë‚˜ì¹´", scores: ["2 PASS", "2 PASS"] },
        { name: "ìœ ë¦¬ì—", scores: ["1 FAIL", "ë¯¸ì œì¶œ"] },
        { name: "ìœ¤ì„¸ëŒ", scores: ["ë¯¸ì œì¶œ", "ë¯¸ì œì¶œ"] },
        { name: "ì§€ì˜¤", scores: ["1 FAIL", "1 FAIL"] },
        { name: "í–„ì©Œêµ¬", scores: ["1 PASS", "2 PASS"] }
    ];

    // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ë˜ëŠ” ì´ˆê¸°í™”
    let savedData = JSON.parse(localStorage.getItem('hotclipData')) || initialParticipants;

    function applyStyle(val) {
        const v = val.toUpperCase();
        if (v.includes("PASS")) return 'style="color:#2ecc71; font-weight:bold;"';
        if (v.includes("FAIL")) return 'style="color:#e74c3c; font-weight:bold;"';
        if (v.includes("ë¯¸ì œì¶œ")) return 'style="color:#adb5bd; font-weight:bold;"';
        return 'style="color:#1c1e21; font-weight:bold;"';
    }

    function initTable() {
        const header = document.getElementById('headerRow');
        const tbody = document.getElementById('tableBody');
        const weekCount = savedData[0].scores.length;

        // í—¤ë” ë Œë”ë§
        header.innerHTML = '<th class="name-col">ì´ë¦„</th>';
        for (let i = 1; i <= weekCount; i++) {
            const th = document.createElement('th');
            th.innerText = `${i}ì£¼ì°¨`;
            header.appendChild(th);
        }

        // ë°”ë”” ë Œë”ë§
        tbody.innerHTML = '';
        savedData.forEach((p, pIndex) => {
            const row = document.createElement('tr');
            let cells = `<td class="name-col">${p.name}</td>`;
            p.scores.forEach((score, sIndex) => {
                cells += `<td><input type="text" value="${score}" ${applyStyle(score)} oninput="saveValue(${pIndex}, ${sIndex}, this)"></td>`;
            });
            row.innerHTML = cells;
            tbody.appendChild(row);
        });
    }

    // ê°’ ë³€ê²½ ì‹œ ì €ì¥
    function saveValue(pIndex, sIndex, el) {
        savedData[pIndex].scores[sIndex] = el.value;
        const v = el.value.toUpperCase();
        if (v.includes("PASS")) el.style.color = "#2ecc71";
        else if (v.includes("FAIL")) el.style.color = "#e74c3c";
        else if (v.includes("ë¯¸ì œì¶œ")) el.style.color = "#adb5bd";
        else el.style.color = "#1c1e21";
        el.style.fontWeight = "bold";
        
        localStorage.setItem('hotclipData', JSON.stringify(savedData));
    }

    // ì£¼ì°¨ ì¶”ê°€
    function addNextWeek() {
        savedData.forEach(p => p.scores.push(""));
        localStorage.setItem('hotclipData', JSON.stringify(savedData));
        initTable();
    }

    // ë°ì´í„° ì´ˆê¸°í™”
    function resetData() {
        if (confirm("ëª¨ë“  ë°ì´í„°ë¥¼ ì´ˆê¸° ìƒíƒœë¡œ ë˜ëŒë¦´ê¹Œìš”? (ì¶”ê°€ëœ ì£¼ì°¨ì™€ ì…ë ¥ê°’ì´ ì‚­ì œë©ë‹ˆë‹¤)")) {
            localStorage.removeItem('hotclipData');
            location.reload();
        }
    }

    initTable();
</script>

</body>
</html>